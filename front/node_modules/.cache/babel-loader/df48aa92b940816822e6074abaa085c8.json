{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\BigNova Deliv\\\\LaLivraison\\\\front\\\\src\\\\component\\\\newBarreMenu\\\\shinBarreMenu.js\",\n    _s = $RefreshSig$();\n\nimport BoutonSignUp from \"../newBarreMenu/BoutonSignUp\";\nimport \"./menu.css\";\nimport Search from \"../BarreDeRecherche/Search\";\nimport React, { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport axios from \"axios\";\nimport { createTheme } from '@material-ui/core/styles';\nimport { AppBar, useMediaQuery, Collapse, makeStyles, Toolbar, Avatar, Button } from \"@material-ui/core\";\nimport ShinMenu from \"./shinMenu\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport decode from \"jwt-decode\";\nimport { dispatchLogin, fetchUser, dispatchGetUser } from '../../redux/actions/authAction';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => {\n  return {\n    vide: {\n      /**j ai de besoin de cette classes vide  */\n    },\n    appBarInitial: {\n      padding: 0,\n      width: \"100%\",\n      height: 80,\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      position: \"fixed\",\n      background: \"transparent\"\n    },\n    animatetransParentToWhite: {\n      animation: `transParentToWhite  linear `,\n      animationDuration: \"500ms\",\n      height: 90,\n      backgroundColor: \"white\"\n    },\n    animatewhiteToTransparent: {\n      animation: `whiteToTransparent  linear `,\n      animationDuration: \"500ms\",\n      height: 90\n    },\n    \"@global\": {\n      \"@keyframes transParentToWhite\": {\n        \"  0% \": {\n          backgroundColor: \"transparent\"\n        },\n        \"100% \": {\n          backgroundColor: \"white\"\n        }\n      },\n      \"@keyframes whiteToTransparent\": {\n        \"  0% \": {\n          backgroundColor: \"white\"\n        },\n        \"100% \": {\n          backgroundColor: \"transparent\"\n        }\n      }\n    },\n    menuBarre: {\n      width: \"97%\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      margin: \"auto\"\n    },\n    BtnSignUp: {\n      backgroundColor: \"red !important\",\n      [theme.breakpoints.down(\"xs\")]: {\n        display: \"none\"\n      }\n    },\n    nom_profil: {\n      marginLeft: '15px',\n      color: 'red',\n      [theme.breakpoints.down(\"sm\")]: {\n        fontSize: '14px',\n        color: 'black'\n      }\n    }\n  };\n});\n\nconst ShinBarreMenu = ({}) => {\n  _s();\n\n  const classes = useStyles();\n  const [fadeAnimation, setFadeAnimation] = useState(false);\n  const [animateChampText, setAnimateChampText] = useState(false);\n  const [animateAppBar, setAnimateAppBar] = useState(classes.vide);\n  const [nomLogo, setNomLogo] = useState(\"nomApp\");\n  const mediaquery = useMediaQuery(\"(max-width:600px)\");\n\n  const scroller = () => {\n    if (window.pageYOffset > 50) {\n      setAnimateAppBar(classes.animatetransParentToWhite);\n      setFadeAnimation(true);\n      setNomLogo(\"nomAppBlack\");\n    } else {\n      if (animateAppBar === classes.animatetransParentToWhite) {\n        setAnimateAppBar(classes.animatewhiteToTransparent);\n      }\n\n      setFadeAnimation(false);\n      setNomLogo(\"nomApp\");\n    }\n\n    if (window.pageYOffset > 600) {\n      setAnimateChampText(true);\n    } else {\n      setAnimateChampText(false);\n    }\n  };\n\n  window.addEventListener(\"scroll\", scroller);\n  const dispatch = useDispatch();\n  const auth = useSelector(state => state.auth);\n  const token = useSelector(state => state.token); // console.log(`auth`, auth)\n  // console.log(`token`, token)\n\n  const {\n    user,\n    isLogged\n  } = auth; //   const userLink = () => {\n  //     return <li className=\"drop-nav\">\n  //         <Link to=\"#\" className=\"avatar\">\n  //         <img src={user.avatar} alt=\"\"/> {user.name} <i className=\"fas fa-angle-down\"></i>\n  //         </Link>\n  //         <ul className=\"dropdown\">\n  //             <li><Link to=\"/profile\">Profile</Link></li>\n  //             <li><Link to=\"/\" >Logout</Link></li> \n  //             {/* onClick={handleLogout} */}\n  //         </ul>\n  //     </li>\n  // }\n\n  const userLink = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: 'row',\n        alignItems: 'center',\n        width: 600\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: user.avatar,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this), \" \", user.fullName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"dropdown\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/profile\",\n            children: \"Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this);\n  };\n\n  const history = useHistory();\n  const location = useLocation();\n  useEffect(() => {\n    const firstLogin = localStorage.getItem('firstLogin');\n\n    if (firstLogin) {\n      const getToken = async () => {\n        const res = await axios.post('/user/refreshtoken', null);\n        dispatch({\n          type: 'GET_TOKEN',\n          payload: res.data.access_token\n        });\n      };\n\n      getToken();\n    }\n  }, [auth.isLogged, dispatch]);\n  useEffect(() => {\n    if (token) {\n      const getUser = () => {\n        dispatch(dispatchLogin());\n        const res = fetchUser(token).then(res => {\n          dispatch(dispatchGetUser(res));\n        }); // console.log(`token 2 fetchUser`, token)\n        // console.log(`res res res res  `, res )\n      };\n\n      getUser();\n    }\n  }, [token, dispatch]);\n  return /*#__PURE__*/_jsxDEV(AppBar, {\n    className: `${animateAppBar} ${classes.appBarInitial} `,\n    elevation: 0,\n    children: /*#__PURE__*/_jsxDEV(Toolbar, {\n      className: classes.menuBarre,\n      children: [/*#__PURE__*/_jsxDEV(ShinMenu, {\n        nomLogo: nomLogo // User={User} \n        // Logout={logout} \n\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"champTextContainer\",\n        children: /*#__PURE__*/_jsxDEV(Collapse, {\n          in: animateChampText,\n          direction: \"up\",\n          children: /*#__PURE__*/_jsxDEV(Search, {\n            divClassName: \"rechercheMenu\",\n            inputClassName: \"inputMenu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), isLogged ? userLink() : /*#__PURE__*/_jsxDEV(BoutonSignUp, {\n        nomClass: \"signUpBtn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 200,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ShinBarreMenu, \"Ql4gRx6gQaCKXCEueL26PfLMlxE=\", false, function () {\n  return [useStyles, useMediaQuery, useDispatch, useSelector, useSelector, useHistory, useLocation];\n});\n\n_c = ShinBarreMenu;\nexport default ShinBarreMenu; // useEffect(() => {\n//   const token = User?.token;\n//   if (token) {\n//     const decodedToken = decode(token);\n//     if (decodedToken.exp * 1000 < new Date().getTime()) logout();\n//   }\n//   setUser(JSON.parse(localStorage.getItem(\"profile\")));\n// }, [location]);\n//  <div style={{ display: \"flex\", flexDirection: 'row', alignItems: 'center', width: 'auto' }}>\n//  </div>\n//   {/* </div> */}\n//   {/* <Avatar\n//     className={classes.purple}\n//     alt={isLogged?.user.name}\n//     src={null}\n//   > */}\n//   {/* {User?.result.fullName.charAt(0)} */}\n//   {/* </Avatar> */}\n//   {/* <div className={classes.nom_profil}> {User?.result.fullName} </div> */}\n//   {/* {mediaquery ? null : (\n//     <Button onClick={logout} style={{ backgroundColor: \"black\", color: 'white', marginLeft: '15px', fontSize: '15px', textTransform: 'none' }}>\n//       {\" \"}\n//       se deconnecter{\" \"}\n//     </Button>\n//   )} */}\n// const [User, setUser] = useState(JSON.parse(localStorage.getItem(\"firstLogin\")));\n// const logout = () => {\n//   dispatch({ type: \"LOGOUT\" });\n//   history.push(\"/\");\n//   setUser(null);\n// };\n\nvar _c;\n\n$RefreshReg$(_c, \"ShinBarreMenu\");","map":{"version":3,"sources":["C:/Users/User/Desktop/BigNova Deliv/LaLivraison/front/src/component/newBarreMenu/shinBarreMenu.js"],"names":["BoutonSignUp","Search","React","useState","useEffect","useSelector","axios","createTheme","AppBar","useMediaQuery","Collapse","makeStyles","Toolbar","Avatar","Button","ShinMenu","Link","useHistory","useLocation","useDispatch","decode","dispatchLogin","fetchUser","dispatchGetUser","useStyles","theme","vide","appBarInitial","padding","width","height","display","flexDirection","justifyContent","position","background","animatetransParentToWhite","animation","animationDuration","backgroundColor","animatewhiteToTransparent","menuBarre","alignItems","margin","BtnSignUp","breakpoints","down","nom_profil","marginLeft","color","fontSize","ShinBarreMenu","classes","fadeAnimation","setFadeAnimation","animateChampText","setAnimateChampText","animateAppBar","setAnimateAppBar","nomLogo","setNomLogo","mediaquery","scroller","window","pageYOffset","addEventListener","dispatch","auth","state","token","user","isLogged","userLink","avatar","fullName","history","location","firstLogin","localStorage","getItem","getToken","res","post","type","payload","data","access_token","getUser","then"],"mappings":"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","sourcesContent":["import BoutonSignUp from \"../newBarreMenu/BoutonSignUp\";\r\nimport \"./menu.css\";\r\nimport Search from \"../BarreDeRecherche/Search\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport { createTheme } from '@material-ui/core/styles';\r\nimport {\r\n  AppBar,\r\n  useMediaQuery,\r\n  Collapse,\r\n  makeStyles,\r\n  Toolbar,\r\n  Avatar,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport ShinMenu from \"./shinMenu\";\r\n\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport decode from \"jwt-decode\";\r\nimport { dispatchLogin, fetchUser, dispatchGetUser } from '../../redux/actions/authAction'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => {\r\n  return {\r\n    vide: {\r\n      /**j ai de besoin de cette classes vide  */\r\n    },\r\n    appBarInitial: {\r\n      padding: 0,\r\n      width: \"100%\",\r\n      height: 80,\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      justifyContent: \"center\",\r\n      position: \"fixed\",\r\n      background: \"transparent\",\r\n    },\r\n    animatetransParentToWhite: {\r\n      animation: `transParentToWhite  linear `,\r\n      animationDuration: \"500ms\",\r\n      height: 90,\r\n      backgroundColor: \"white\",\r\n    },\r\n    animatewhiteToTransparent: {\r\n      animation: `whiteToTransparent  linear `,\r\n      animationDuration: \"500ms\",\r\n      height: 90,\r\n    },\r\n\r\n    \"@global\": {\r\n      \"@keyframes transParentToWhite\": {\r\n        \"  0% \": { backgroundColor: \"transparent\" },\r\n        \"100% \": { backgroundColor: \"white\" },\r\n      },\r\n      \"@keyframes whiteToTransparent\": {\r\n        \"  0% \": { backgroundColor: \"white\" },\r\n        \"100% \": { backgroundColor: \"transparent\" },\r\n      },\r\n    },\r\n    menuBarre: {\r\n      width: \"97%\",\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      justifyContent: \"space-between\",\r\n      alignItems: \"center\",\r\n      margin: \"auto\",\r\n    },\r\n    BtnSignUp: {\r\n      backgroundColor: \"red !important\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        display: \"none\",\r\n      },\r\n    },\r\n\r\n    nom_profil: {\r\n\r\n      marginLeft: '15px',\r\n      color: 'red',\r\n\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        fontSize: '14px',\r\n        color: 'black'\r\n      },\r\n\r\n    },\r\n  };\r\n});\r\n\r\n\r\n\r\nconst ShinBarreMenu = ({ }) => {\r\n  const classes = useStyles();\r\n  const [fadeAnimation, setFadeAnimation] = useState(false);\r\n  const [animateChampText, setAnimateChampText] = useState(false);\r\n  const [animateAppBar, setAnimateAppBar] = useState(classes.vide);\r\n  const [nomLogo, setNomLogo] = useState(\"nomApp\");\r\n  const mediaquery = useMediaQuery(\"(max-width:600px)\");\r\n\r\n\r\n  const scroller = () => {\r\n    if (window.pageYOffset > 50) {\r\n      setAnimateAppBar(classes.animatetransParentToWhite);\r\n      setFadeAnimation(true);\r\n      setNomLogo(\"nomAppBlack\");\r\n    } else {\r\n      if (animateAppBar === classes.animatetransParentToWhite) {\r\n        setAnimateAppBar(classes.animatewhiteToTransparent);\r\n      }\r\n\r\n      setFadeAnimation(false);\r\n      setNomLogo(\"nomApp\");\r\n    }\r\n\r\n    if (window.pageYOffset > 600) {\r\n      setAnimateChampText(true);\r\n    } else {\r\n      setAnimateChampText(false);\r\n    }\r\n  };\r\n  window.addEventListener(\"scroll\", scroller);\r\n\r\n  const dispatch = useDispatch()\r\n  const auth = useSelector(state => state.auth)\r\n  const token = useSelector(state => state.token)\r\n\r\n  // console.log(`auth`, auth)\r\n  // console.log(`token`, token)\r\n  const { user, isLogged } = auth\r\n\r\n\r\n//   const userLink = () => {\r\n//     return <li className=\"drop-nav\">\r\n//         <Link to=\"#\" className=\"avatar\">\r\n//         <img src={user.avatar} alt=\"\"/> {user.name} <i className=\"fas fa-angle-down\"></i>\r\n//         </Link>\r\n//         <ul className=\"dropdown\">\r\n//             <li><Link to=\"/profile\">Profile</Link></li>\r\n//             <li><Link to=\"/\" >Logout</Link></li> \r\n//             {/* onClick={handleLogout} */}\r\n//         </ul>\r\n//     </li>\r\n// }\r\n  const userLink = () => {\r\n    return (\r\n\r\n      <div style={{ display: \"flex\", flexDirection: 'row', alignItems: 'center',  width:600}}>\r\n        <li>\r\n          <Link to='/'>\r\n            <img src={user.avatar} alt='' /> {user.fullName}\r\n          </Link>\r\n        \r\n        </li>\r\n        <ul className=\"dropdown\">\r\n            <li><Link to=\"/profile\">Profile</Link></li>\r\n            <li><Link to=\"/\" >Logout</Link></li> \r\n            {/* onClick={handleLogout} */}\r\n         </ul>\r\n      </div>\r\n\r\n    )\r\n  }\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const firstLogin = localStorage.getItem('firstLogin')\r\n    if (firstLogin) {\r\n      const getToken = async () => {\r\n        const res = await axios.post('/user/refreshtoken', null)\r\n        dispatch({ type: 'GET_TOKEN', payload: res.data.access_token })\r\n      }\r\n      getToken()\r\n    }\r\n  }, [auth.isLogged, dispatch])\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      const getUser = () => {\r\n        dispatch(dispatchLogin())\r\n        const res = fetchUser(token).then(res => {\r\n          dispatch(dispatchGetUser(res));\r\n        })\r\n        // console.log(`token 2 fetchUser`, token)\r\n        // console.log(`res res res res  `, res )\r\n        \r\n         \r\n      }\r\n      getUser()\r\n    }\r\n  }, [token, dispatch])\r\n\r\n\r\n  return (\r\n    <AppBar\r\n      className={`${animateAppBar} ${classes.appBarInitial} `}\r\n      elevation={0}\r\n    >\r\n      <Toolbar className={classes.menuBarre}>\r\n        <ShinMenu nomLogo={nomLogo}\r\n        // User={User} \r\n        // Logout={logout} \r\n        />\r\n\r\n        <div id=\"champTextContainer\">\r\n          {\r\n            <Collapse in={animateChampText} direction=\"up\">\r\n              <Search divClassName=\"rechercheMenu\" inputClassName=\"inputMenu\" />\r\n            </Collapse>\r\n          }\r\n        </div>\r\n\r\n\r\n        {isLogged ? userLink()\r\n\r\n\r\n          : (\r\n            <BoutonSignUp nomClass=\"signUpBtn\" />\r\n          )}\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nexport default ShinBarreMenu;\r\n\r\n  // useEffect(() => {\r\n  //   const token = User?.token;\r\n\r\n  //   if (token) {\r\n  //     const decodedToken = decode(token);\r\n\r\n  //     if (decodedToken.exp * 1000 < new Date().getTime()) logout();\r\n  //   }\r\n\r\n  //   setUser(JSON.parse(localStorage.getItem(\"profile\")));\r\n  // }, [location]);\r\n            //  <div style={{ display: \"flex\", flexDirection: 'row', alignItems: 'center', width: 'auto' }}>\r\n\r\n          //  </div>\r\n\r\n          //   {/* </div> */}\r\n          //   {/* <Avatar\r\n          //     className={classes.purple}\r\n          //     alt={isLogged?.user.name}\r\n          //     src={null}\r\n          //   > */}\r\n          //   {/* {User?.result.fullName.charAt(0)} */}\r\n          //   {/* </Avatar> */}\r\n          //   {/* <div className={classes.nom_profil}> {User?.result.fullName} </div> */}\r\n\r\n          //   {/* {mediaquery ? null : (\r\n          //     <Button onClick={logout} style={{ backgroundColor: \"black\", color: 'white', marginLeft: '15px', fontSize: '15px', textTransform: 'none' }}>\r\n          //       {\" \"}\r\n          //       se deconnecter{\" \"}\r\n          //     </Button>\r\n          //   )} */}\r\n\r\n            // const [User, setUser] = useState(JSON.parse(localStorage.getItem(\"firstLogin\")));\r\n\r\n\r\n\r\n  // const logout = () => {\r\n  //   dispatch({ type: \"LOGOUT\" });\r\n\r\n  //   history.push(\"/\");\r\n\r\n  //   setUser(null);\r\n  // };"]},"metadata":{},"sourceType":"module"}